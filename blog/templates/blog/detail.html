{% extends 'blog/base1.html' %}
{% load static %}
{% block content %}
{% load blog_tags %}
<div id="posts" class="posts-expand">
	<article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article" style="opacity: 1; display: block; transform: translateY(0px);">
	<link itemprop="mainEntityOfPage" href="{% url 'blog:detail' post.id %}">
	<span hidden="" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
	<meta itemprop="name" content="IIssNan">
	<meta itemprop="description" content="">
	<meta itemprop="image" content="/uploads/m3.jpg">
	</span>
	<span hidden="" itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
	<meta itemprop="name" content="IIssNan&#39;s Notes">
	</span>
	<header class="post-header">
	<h1 class="post-title" itemprop="name headline">
		{{ post.title }}
	</h1>
	<div class="post-meta">
		<span class="post-time">
		<span class="post-meta-item-icon">
		<i class="fa fa-calendar-o"></i>
		</span>
		<span class="post-meta-item-text">发表于</span>
		<time title="创建于" itemprop="dateCreated datePublished" datetime="{{ post.created_time }}">
{{ post.created_time }}
		</time>
		</span>
		<span class="post-category">
		<span class="post-meta-divider">|</span>
		<span class="post-meta-item-icon">
		<i class="fa fa-folder-o"></i>
		</span>
		<span class="post-meta-item-text">分类于</span>
		<span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
		<a href="{% url 'blog:category' post.category.id %}" itemprop="url" rel="index">
		<span itemprop="name">{{post.category.name}}</span>
		</a>
		</span>
		</span>
		<span class="post-comments-count">
		<span class="post-meta-divider">|</span>
		<span class="post-meta-item-icon">
		<i class="fa fa-comment-o"></i>
		</span>
		<a href="{% url 'blog:detail' post.id %}#comments" itemprop="discussionUrl">
		<span class="post-comments-count disqus-comment-count" data-disqus-identifier="{% url "blog:detail" post.id %}" itemprop="commentCount">{{ post.comment_set.count }} Comments</span>
		</a>
		</span>
		<span id="/2016/publishing-github-pages-with-travis-ci/" class="leancloud_visitors" data-flag-title="使用 Travis CI 自动更新 GitHub Pages">
		<span class="post-meta-divider">|</span>
		<span class="post-meta-item-icon">
		<i class="fa fa-eye"> &nbsp;{{post.views}}</i>
		</span>
		<span class="post-meta-item-text"> 阅读 </span>
		<span class="leancloud-visitors-count"></span>
		</span>
	</div>
	</header>
	<div class="post-body" itemprop="articleBody">
		{{ post.body|safe }}
	</div>
	<div>
	</div>
	<div>
	</div>
	<div>
		<ul class="post-copyright">
			<li class="post-copyright-author">
			<strong>本文作者：</strong>
			{{post.author.first_name}}
			</li>
			<li class="post-copyright-link">
			<strong>本文链接：</strong>
			<a href="{{ request.get_host }}{% url 'blog:detail' post.id %}" title="{{post.title}}">{% url 'blog:detail' post.id %}</a>
			</li>
			<li class="post-copyright-license">
			<strong>版权声明： </strong>
本博客所有文章除特别声明外，均采用 
			<a href="http://creativecommons.org/licenses/by-nc-sa/3.0/cn/" rel="external nofollow" target="_blank">CC BY-NC-SA 3.0 CN</a> 许可协议。转载请注明出处！
			</li>
		</ul>
	</div>
	<footer class="post-footer">
	<div class="post-tags">
		{% get_tags as tag_list %}
		{% for tag in tag_list %}
		<a href="{% url 'blog:tag' tag.id %}" rel="tag"># {{tag.name}}</a>
		{% endfor%}
	</div>
	
	<div class="post-nav">
		<div class="post-nav-next post-nav-item">
			{% if next_post %}
			<a href="{% url 'blog:detail' next_post.id %}" rel="next" title="{{ next_post.title }}">
			<i class="fa fa-chevron-left"></i>{{ next_post.title }}
			</a>
			{% endif %}
		</div>
		<span class="post-nav-divider"></span>
		<div class="post-nav-prev post-nav-item">
			{% if prev_post %}
			<a href="{% url 'blog:detail' prev_post.id %}" rel="prev" title="{{ prev_post.title }}">
                {{ prev_post.title }} <i class="fa fa-chevron-right"></i>
            </a>
			{% endif %}
		</div>
	</div>
	
	</footer>
	</article>
	<div class="post-spread">
	</div>
</div>
{% endblock content %}
{% block comments %}
<div class="comments" id="comments">
	<hr>
<div class="bootstrap-frm">
<form action="{% url 'comments:post_comment' post.id %}" method="post" class="STYLE-NAME">
<h1>发表评论
<span>请填写全部信息</span>
</h1>
{% csrf_token %}
<label for="{{form.nickname.id_for_label}}"><span>*名字：</span></label>
<!-- <input type="text" id="id_name" name="name" required> -->
{{ form.nickname }}
{{ form.nickname.errors}}
<label for="{{form.email.id_for_label}}"><span>*邮箱：</span></label>
<!-- <input type="email" id="id_email" name="email" required> -->
{{ form.email }}
{{ form.email.errors}}

<label for="{{form.url.id_for_label}}"><span>网址：</span></label>
<!--  <input type="text" id="id_url" name="url"> -->
{{ form.url }}
{{ form.url.errors }}

<label for="{{form.text.id_for_label}}"><span>*评论：</span></label>
<!-- <textarea name="comment" id="id_comment" required></textarea> -->
{{ form.text }}
{{ form.text.errors }} 
<label>
<span>&nbsp;</span>
<button type="submit" class="button">发表</button>
</label>
</form>
</div>
   <div class="comment-list-panel">
	    <h3 id="comments">评论列表，共 <span>{{ post.comment_set.count }}</span> 条评论</h3>
	    <ul class="comment-list list-unstyled">
	        {% for comment in comment_list %}
	        <li class="comment-item">
	            <span class="nickname">{{ comment.nickname }}</span>
	            <time class="submit-date">{{ comment.created_time}}</time>
	            <div class="text">
	                {{comment.text}}
	            </div>
	        </li>
	        {% empty %}
	        暂无评论
	        {% endfor %}
	    </ul>
	</div>
</div>
{% endblock comments %}